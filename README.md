# analist_reports

A cross-platform solution composed of a Flutter mobile/desktop client and a C# ASP.NET Core backend for incident reporting.

## Project structure (high level)

- reports_app — Flutter application (mobile, web, desktop). See the Flutter entrypoint: [`MyApp`](reports_app/lib/main.dart) — [reports_app/lib/main.dart](reports_app/lib/main.dart).
  - Key UI screens: incidents list and details: [reports_app/lib/screens/incidents_screen.dart](reports_app/lib/screens/incidents_screen.dart), [reports_app/lib/screens/incident_details.dart](reports_app/lib/screens/incident_details.dart).
  - Services calling the backend: [reports_app/lib/services/incidents_service.dart](reports_app/lib/services/incidents_service.dart), [reports_app/lib/services/user_service.dart](reports_app/lib/services/user_service.dart).

- reports-backend — ASP.NET Core Web API written in C#. Backend entrypoint: [`Program.cs`](reports-backend/Program.cs) — [reports-backend/Program.cs](reports-backend/Program.cs).
  - Main controllers and logic: [`reports_backend.Controllers.IncidentsController`](reports-backend/src/Controllers/IncidentsController.cs) — [reports-backend/src/Controllers/IncidentsController.cs](reports-backend/src/Controllers/IncidentsController.cs), and users controller: [reports-backend/src/Controllers/UsersController.cs](reports-backend/src/Controllers/UsersController.cs).
  - Repositories and models live under: [reports-backend/src/Repositories](reports-backend/src/Repositories) and [reports-backend/src/Models](reports-backend/src/Models).

## Overview

- Client: Flutter app handles UI, image uploads, authentication, and displays incidents. It communicates with the backend using HTTP and JWT tokens. Relevant client code: [reports_app/lib/services/incidents_service.dart](reports_app/lib/services/incidents_service.dart).
- Server: ASP.NET Core Web API exposes endpoints for authentication, user management, and incident CRUD. It uses JWT authentication and repository patterns. Controller example: [`reports_backend.Controllers.IncidentsController`](reports-backend/src/Controllers/IncidentsController.cs).

## Running locally (quick)

- Backend
  1. Open [reports-backend/Program.cs](reports-backend/Program.cs).
  2. Configure connection string and JWT settings in [reports-backend/appsettings.json](reports-backend/appsettings.json).
  3. Run with dotnet:
     ```sh
     cd reports-backend
     dotnet run
     ```
- Flutter client
  1. Open [reports_app/lib/main.dart](reports_app/lib/main.dart).
  2. Update API base URL in [reports_app/lib/utils/base_url.dart](reports_app/lib/utils/base_url.dart) if needed.
  3. Run the app:
     ```sh
     cd reports_app
     flutter pub get
     flutter run
     ```

## Notes

- Image uploads are handled by the backend and saved under wwwroot/images (see create incident flow in [`reports_backend.Controllers.IncidentsController`](reports-backend/src/Controllers/IncidentsController.cs)).
- Authentication uses JWT tokens generated by the backend service (see [reports-backend/src/Services/TokenService.cs](reports-backend/src/Services/TokenService.cs)).

## Useful files

- Client entry: [reports_app/lib/main.dart](reports_app/lib/main.dart) (`MyApp`)
- Backend entry: [reports-backend/Program.cs](reports-backend/Program.cs)
- Incidents controller: [`reports_backend.Controllers.IncidentsController`](reports-backend/src/Controllers/IncidentsController.cs) — [reports-backend/src/Controllers/IncidentsController.cs](reports-backend/src/Controllers/IncidentsController.cs)
- Frontend incidents service: [reports_app/lib/services/incidents_service.dart](reports_app/lib/services/incidents_service.dart)

## Contributing

- Run and test backend APIs first, then point the Flutter client to the running backend. Follow existing code patterns for controllers/repositories and Flutter services/widgets.
